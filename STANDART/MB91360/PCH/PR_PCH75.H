#ifndef _port_h
#define _port_h

//  ФАЙЛ ОПРЕДЕЛЕНИЙ ДЛЯ ОБРАБОТКИ ВНЕШНИХ ДИСКРЕТНЫХ СИГНАЛОВ.

   //   Константные макросы для перевода заданной постояной времени
   // фильтрации/антидребезга, из милисекунд в дискреты таймера,
   //     допустимый диапазон "0.5 мсек"..."12.0 сек" ;
#define  _Drb_msec( ax )  _MkSec( (d)ax * 1000. / 256. )

#define   _Sync_mask   (0x01)

#define  _Gotov_mask   (0x80)

//---------------------------

#define   mOst     PDRQ_PDQ5 == 0

//-----  Создание шаблона порта сигналов. --
// Создание объединения для возможности обращения сразу ко всем разрядам.

  union Prt   {
        byte all ;
        struct {  word  n7  : 1 ;
                  word  n6  : 1 ;
                  word  n5  : 1 ;
                  word  n4  : 1 ;
                  word  n3  : 1 ;
                  word  n2  : 1 ;
                  word  n1  : 1 ;
                  word  n0  : 1 ; }  _ ;
              } ;

/*------------------------------------------------*/
#ifdef   _MAIN_INCLUDE
/*------------------------------------------------*/

//-----  Ячейки соответствующие портам выходных внешних сигналов. --

_register union Prt  Po0_c ;  // копия выводимого в выходной порт.

//--- Ячейки соответствующие портам внешних входных сигналов.

         union Prt  Pi0_c ;  //  необработанное состояние порта.

         union Prt  Pi0_nm ;// отнормированное состояние порта.

_register union Prt  Pi0_f ;  // отфильтрованное состояние порта.

word  P0_t [ 8 ] ; //  Матрица ячеек для счета времени при фильтрации
                   // сигналов порта P0.


/*------------------------------------------------*/
#else
/*------------------------------------------------*/

extern _register     union Prt    Po0_c ;

/*------------------------------------------------*/

extern              union Prt     Pi0_c ,  Pi0_nm ;
extern _register    union Prt     Pi0_f ;

extern     word  P0_t [ 8 ] ;

/*------------------------------------------------*/
#endif
#endif
