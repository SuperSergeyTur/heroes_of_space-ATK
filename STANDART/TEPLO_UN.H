#ifndef _teplo_un_h
#define _teplo_un_h

    //  Структура оперативных данных теплового расчета.
struct Teplo_un
  {
    word     I  ;
    word     I_max  ;
    lword    Integr ;
    word     TimeCikl ;
    word*    Koef_I ;
  } ;

    //  Структура исходных данных теплового расчета.
struct Teplo_Data
{
    /* Количество точек заданной токовременной таблицы. */

  word   NumTeploPoint  ;

    /* Время цикла перерасчета тепловой защиты ( в секундах). */

  word   TimeCikl_Teplo  ;

    /*   Макс. доп. значение нагрева ( вычисляется в том же масштабе,
     * что и ток). Соответствует макс.доп. значению старших двух байт
     * теплового интегратора.
     */

  word   TeploMax  ;

    /*   Значение в дискретах, соответствующее номинальному
     * значению тока, используемого для теплового расчета.  */
    /*   Номинальное значение нагрева вычисляется в том же масштабе,
     * что и ток. Соответствует установившемуся значению старших двух байт
     * теплового интегратора при длительном номинальном токе.
     */

  word   TeploNom  ;

    /*   Указатель на таблицу токов заданной токовременной таблицы. */

  word   *Tok ;

    /*   Указатель на таблицу коэффициентов расчета нагрева. Коэффициенты
     *  в таблице расположены соответственно токам в вышеприведеной таблице.
     *  Обе таблицы используются для нахождения коэфф. расчета как функции
     *  текущего тока. На интервалах между точками коэффициент вычисляется
     *  путем линейной аппроксимации.
     */

  word   *Kq ;

    /*   Коэффициент расчета охлаждения. */

  word   Kq_Ohlad ;

    /*   Коэффициент расчета допустимого тока как функции вычисленного нагрева.
     *  Следовало бы иметь таблицу коэфф. расположенных соответственно токам,
     *  но в этом случае отсутствует плавность наложения ограничения на ток (при
     *  монотонном(!) нагреве или охлаждении) из-за перехода от одного коэффициента
     *  к другому (в зависимости от диапазона тока).
     *    Поэтому выбран один обратный коэфф. соответствующий наибольшему коэфф. из
     *  таблицы '_Kq[]', что обеспечивает наибольшую плавность наростания или снижения
     *  ограничения и его несколько более раннее наложение.
     *  Если выбрать обратный коэфф. соответствующий наименьшему коэфф. из таблицы
     *  '_Kq[]', то при этом будет наблюдаться резкое наростание или снижение
     *  ограничения при его несколько более позднем наложение.
     */

  word   Kq_Obratn ;

} ;

void Teplo_Uni ( struct Teplo_un *ptr , struct Teplo_Data *dat ) ;

/*------------------------------------------------*/
#endif

